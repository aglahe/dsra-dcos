{
    "id": "/dsra/bamboo",
    "cpus": 1.0,
    "mem": 1024.0,
    "instances": 1,
    "constraints": [["hostname", "UNIQUE"]],

    "environment": {
       "MARATHON_ENDPOINT" : "http://10.105.0.1:8080,http://10.105.0.3:8000,http://10.105.0.5:8000,http://10.105.0.7:8000,http://10.105.0.9:8000",
       "BAMBOO_ENDPOINT" : "http://localhost:8000",
       "BAMBOO_ZK_HOST" : "10.105.0.1:2181,10.105.0.3:2181,10.105.0.5:2181,10.105.0.7:2181,10.105.0.9:2181",
       "BAMBOO_ZK_PATH" : "/bamboo", 
       "BIND" : ":8000", 
       "CONFIG_PATH": "config/bamboo.json", 
       "BAMBOO_DOCKER_AUTO_HOST" : true,
       "STATSD_ENABLED" : false    
    },

    "container": {
        "type": "DOCKER",
        "docker": {
            "image": "hub.dsra.local:8000/dsra/bamboo:0.2.16.1",
            "portMappings": [
               { "containerPort": 8000, "hostPort": 8000, "protocol": "tcp" },
               { "containerPort": 80, "hostPort": 80, "protocol": "tcp"}
            ]
        },
    },

    "uris":  [
      "file:///etc/docker.tar.gz"
    ],

    "healthChecks": [
       {
         "protocol": "HTTP",
         "portIndex": 80,
         "path": "/",
         "gracePeriodSeconds": 5,
         "intervalSeconds": 20,
         "maxConsecutiveFailures": 3
       },{
         "protocol": "HTTP",
         "portIndex": 8000,
         "path": "/",
         "gracePeriodSeconds": 5,
         "intervalSeconds": 20,
         "maxConsecutiveFailures": 3
       }
    ]
}
